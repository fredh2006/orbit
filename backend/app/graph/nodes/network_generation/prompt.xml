<?xml version="1.0" encoding="UTF-8"?>
<prompt>
  <instruction>
    You are creating a realistic social network graph that shows which personas would be connected to each other on {platform}.

    Consider how real social networks form:
    - People with shared interests connect
    - Demographics matter (age, location, life stage)
    - Similar behavior patterns cluster together
    - Platform norms influence network structure
    - Some people are highly connected (influencers), others have few connections
    - Communities form around shared traits
  </instruction>

  <personas>
    {personas_summary}
  </personas>

  <initial_reactions>
    {reactions_summary}
  </initial_reactions>

  <task>
    Create a CONCISE social network showing key connections between personas.

    IMPORTANT OUTPUT SIZE CONSTRAINTS:
    - For 50 personas: Create approximately 150-250 total edges (3-5 per persona average)
    - Focus ONLY on the most meaningful connections
    - Do NOT attempt to model every possible connection
    - Keep the JSON response under 10,000 characters

    For {platform}, consider these platform-specific patterns:
    - Instagram: Tighter clusters, visual content creators connect, interest-based communities
    - TikTok: More fluid connections, trend-based clustering, creator-viewer asymmetry
    - Twitter: Looser networks, topic-based follows, news/opinion leaders have many followers
    - YouTube: Subscriber-creator relationship, niche communities

    Create connections based on:
    1. Shared interests (strongest factor)
    2. Similar demographics (age, location)
    3. Matching personality traits
    4. Similar engagement patterns from initial reactions
  </task>

  <output_format>
    Return ONLY valid JSON with NO markdown formatting. Use this EXACT structure:
    {{
      "edges": [
        {{
          "source": "persona_id",
          "target": "persona_id",
          "strength": 0.5,
          "connection_type": "acquaintance"
        }}
      ],
      "clusters": [
        {{
          "cluster_id": "cluster_1",
          "members": ["persona_id1", "persona_id2"]
        }}
      ],
      "influence_hubs": [
        {{
          "persona_id": "persona_id",
          "influence_score": 0.8,
          "reach": 15
        }}
      ]
    }}

    KEEP IT CONCISE:
    - Only include "edges", "clusters", and "influence_hubs" - nothing else
    - Limit to 150-250 edges total
    - Create 3-7 clusters
    - Identify 3-5 influence hubs
  </output_format>

  <guidelines>
    - IMPORTANT: Create a SUBSET of connections, not all possible connections
    - Target 3-8 meaningful connections per persona (not hundreds!)
    - Focus on the MOST SIGNIFICANT connections only
    - Total edges should be approximately 3-5x the number of personas

    - Connection strength:
      * 0.9-1.0: Close friends/family (2-way, frequent interaction)
      * 0.6-0.8: Regular acquaintances (shared interests, some interaction)
      * 0.3-0.5: Casual followers (one-way or weak connection)
      * 0.1-0.2: Loose connections (barely interact)

    - Create realistic clusters:
      * Fashion enthusiasts in LA
      * Tech workers in SF
      * Parents with young children
      * Fitness enthusiasts
      * Students at similar universities

    - Identify 5-10% of personas as influence hubs (high connection count)

    - Clustering coefficient should be:
      * Instagram: 0.4-0.6 (tight communities)
      * TikTok: 0.2-0.4 (looser structure)
      * Twitter: 0.15-0.3 (very loose)
      * YouTube: 0.3-0.5 (niche communities)
  </guidelines>

  <examples>
    <example>
      <context>TikTok with 5 personas</context>
      <output>
{{
  "edges": [
    {{
      "source": "tiktok_001",
      "target": "tiktok_002",
      "strength": 0.85,
      "connection_type": "close_friend"
    }},
    {{
      "source": "tiktok_001",
      "target": "tiktok_003",
      "strength": 0.45,
      "connection_type": "follower"
    }},
    {{
      "source": "tiktok_002",
      "target": "tiktok_004",
      "strength": 0.65,
      "connection_type": "acquaintance"
    }}
  ],
  "clusters": [
    {{
      "cluster_id": "dance_creators",
      "members": ["tiktok_001", "tiktok_002"]
    }},
    {{
      "cluster_id": "fitness_enthusiasts",
      "members": ["tiktok_003", "tiktok_004", "tiktok_005"]
    }}
  ],
  "influence_hubs": [
    {{
      "persona_id": "tiktok_001",
      "influence_score": 0.9,
      "reach": 12
    }}
  ]
}}
      </output>
    </example>
  </examples>

  <important>
    CRITICAL CONSTRAINTS:
    - MAXIMUM 250 edges total (for 50 personas, that's 5 per persona average)
    - Do NOT create a dense network - keep it sparse and realistic
    - Focus ONLY on the strongest, most meaningful connections
    - Return ONLY the JSON - no explanations, no markdown, no extra text
    - Keep the response under 10,000 characters to avoid truncation

    Quality over quantity:
    - Better to have 150 well-chosen connections than 500 random ones
    - Some personas should have few connections (1-2), others many (8-12)
    - Ensure the network is connected through friendship chains
    - Match platform norms for realistic network density
  </important>
</prompt>
